// Image = hui:bottom
// Title[Deutsch] = Oktavieren
use "../../api.kaba"

const string AutoConfigLevel = "0:1:0.1:100:%"

class Config : PluginData
	float Level

	overwrite void reset()
		Level = 0.5

class Octaver : AudioEffect
	Config config

	void doOctaver(float b[])
		for int i, 0, b.num
			b[i] = (b[i] * b[i]) * config.Level + b[i] * (1 - config.Level)

	overwrite void process(BufferBox buf)
		doOctaver(buf.r)
		doOctaver(buf.l)
